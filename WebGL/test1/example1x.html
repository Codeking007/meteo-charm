<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src="map.js" ></script>
    <script src="https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
    <!--<script src='//cdn.bootcss.com/mapbox-gl/0.39.1/mapbox-gl.js'></script>-->
    <!--<link href='//cdn.bootcss.com/mapbox-gl/0.39.1/mapbox-gl.css' rel='stylesheet' />-->
    <script src='https://cdn.bootcss.com/mapbox-gl/0.45.0/mapbox-gl.js'></script>
    <link href='https://cdn.bootcss.com/mapbox-gl/0.45.0/mapbox-gl.css' rel='stylesheet' >
    <script src='//cdn.bootcss.com/Turf.js/4.5.2/turf.js' charset='utf-8'></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
        .btn-control {
            font:bold 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
            background-color: #3386c0;
            color: #fff;
            position: absolute;
            top: 20px;
            left: 40%;
            border: none;
            width: 200px;
            margin-left:-100px;
            display: block;
            cursor: pointer;
            padding: 10px 20px;
            border-radius: 3px;
        }

        .btn-control:hover {
            background-color: #4ea0da;
        }
        .btn-control1 {
            font:bold 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
            background-color: #3386c0;
            color: #fff;
            position: absolute;
            top: 20px;
            left: 50%;
            border: none;
            width: 200px;
            margin-left:-100px;
            display: block;
            cursor: pointer;
            padding: 10px 20px;
            border-radius: 3px;
        }

        .btn-control1:hover {
            background-color: #4ea0da;
        }
    </style>
</head>
<body>
    <div id='map'></div>
    <button id='filter' class='btn-control'>过滤</button>
    <script>
        const _data = turf.featureCollection([
            // turf.lineString([[10, 50], [10, 40], [-10, 40], [-10, 50], [10, 50]]),
            turf.lineString([[1, 0],[0, 5], [-1, 0], [1, 0]]),
        ]);
        mapboxgl.accessToken = 'pk.eyJ1IjoiaGZiNTY0IiwiYSI6ImNqN2I3NnplMTBwb2IzMnJzcWh0OWp6YTQifQ.TM_EQumke3MvFzemeZE48g';
        const map = new mapboxgl.Map({
            container: 'map', // container id
            style: {
                "version": 8,
                "glyphs": "mapbox://fonts/mapbox/{fontstack}/{range}.pbf",
                "sources": {
                    "test":{
                        "type": "geojson",
                        "data": _data
                    },
                    "states":{
                        "type": "geojson",
                        "data": _map
                    },
                },
                "layers": [{
                    'id': 'line-animation',
                    "type": "fill",
                    'source': "states",
                    'paint': {
                        'fill-color':'rgba(100, 100, 100, 1)',
                        'fill-outline-color': 'rgba(255,255,255,1)'
                    }
                }]
            },
            center: [0,0], // starting position
            zoom: 1 // starting zoom
        });
        map.on("load", function() {
            map.addLayer({
                'id': 'typhoonWarning',
                'type': 'symbol',
                'source': {
                    'type': 'geojson',
                    'data': {
                        'type': 'FeatureCollection',
                        'features': [{
                            'type': 'Feature',
                            'properties': {
                                'color': "#900",
                                "description":"aaaa"
                            },
                            'geometry': {
                                'type': 'LineString',
                                'coordinates': [
                                    [0, 0],
                                    [50, 50]
                                ]
                            }
                        }, {
                            'type': 'Feature',
                            'properties': {
                                'color': "#35e80d",
                                "description":"bbbb"
                            },
                            'geometry': {
                                'type': 'LineString',
                                'coordinates': [
                                    [-20, -20],
                                    [-50, -50]
                                ]
                            }
                        }]
                    }
                },
                'layout': {
                    "symbol-placement":'line',
                    'visibility': 'visible',
                    "text-size" : 25,
                    "text-field": "{description}"
                },
                'paint': {
                    "text-color": "red"
                }
            });
        });

        $("#filter").click(function(){

        });
    </script>
</body>
</html>
